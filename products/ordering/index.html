<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Ordering — Alaria Dynamics</title>
  <link rel="icon" type="image/svg+xml" href="/alariadynamics.co/assets/img/logo.svg">
    <link rel="stylesheet" href="/alariadynamics.co/assets/css/site.css">
  </head>
  <body>
    <header class="site-header">
      <div class="container">
  <a class="logo" href="/alariadynamics.co/"><span class="site-logo"><img src="/alariadynamics.co/assets/img/logo.svg" alt="Alaria Dynamics"></span></a>
        <nav class="main-nav nav">
          <div class="nav-item"><a href="/alariadynamics.co/">Home</a></div>
          <div class="nav-item"><a href="/alariadynamics.co/about/index.html">About</a></div>
          <div class="nav-item nav-item--megamenu">
            <a>What we make ▾</a>
            <div class="megamenu-panel">
              <div class="megamenu-column">
                <h4>Aircraft</h4>
                <a href="/alariadynamics.co/products/aircraft/index.html">Aircraft</a>
              </div>
              <div class="megamenu-column">
                <h4>Naval</h4>
                <a href="/alariadynamics.co/products/naval/index.html">Naval</a>
              </div>
              <div class="megamenu-column">
                <h4>Land</h4>
                <a href="/alariadynamics.co/products/land/index.html">Land</a>
              </div>
            </div>
          </div>
          <div class="nav-item"><a href="/alariadynamics.co/contact/index.html">Contact</a></div>
        </nav>
        <div class="header-actions">
          <form class="search-form" action="/search.html" method="get" role="search">
            <input type="search" name="q" placeholder="Search site" aria-label="Search site" data-i18n="search_placeholder">
          </form>
          <div class="lang-toggle" aria-label="Language selector"></div>
        </div>
      </div>
    </header>

    <main class="container">
      <h1>Ordering</h1>
      <p>Use this page to submit ordering requests or procurement inquiries. The form below will collect your details and routing information.</p>
      <section class="ordering-flow">
        <h2>Your Cart</h2>
        <div id="cart-container"></div>
  <p class="muted">Add products from product pages using the <strong data-i18n="order_now">Order Now</strong> button; items will appear here. Use <em>Open Ordering Form</em> to open the procurement form with a cart summary or copy it to your clipboard.</p>
      </section>

      <section style="margin-top:18px;">
        <h2>Ordering Form</h2>
        <p>When you're ready, open the ordering form to submit your procurement request.</p>
        <div class="embed-wrap">
          <iframe src="https://forms.gle/aoQkRM8kt3a92Law5" title="Ordering form" loading="lazy"></iframe>
        </div>
        <p>If the form doesn't load, <a href="https://forms.gle/aoQkRM8kt3a92Law5" target="_blank" rel="noopener noreferrer">open the ordering form in a new tab</a>.</p>
      </section>
    
      <section style="margin-top:18px;">
        <h3>Admin: Wire Google Form Prefill (optional)</h3>
        <p class="muted">Paste a Google Form <em>prefill</em> URL here and click <strong>Apply</strong> to automatically extract the entry.* parameter names used to prefill fields. This is an admin convenience and not visible to end users.</p>
        <textarea id="prefill-url" placeholder="Paste Google Form prefill URL here" style="width:100%;min-height:60px"></textarea>
        <div style="margin-top:8px;">
          <button id="apply-prefill" class="btn">Apply</button>
          <button id="clear-prefill" class="btn btn--secondary" style="margin-left:8px">Clear</button>
          <span id="prefill-status" class="muted" style="margin-left:12px"></span>
        </div>
      </section>
    </main>

    <footer class="site-footer">
      <div class="container">
        <p>&copy; 2025 Alaria Dynamics. All rights reserved.</p>
      </div>
    </footer>
    <script src="/alariadynamics.co/assets/js/cart.js"></script>
    <script>
      // Developer note: to enable prefilled ordering submissions, supply the Google Form entry IDs
      // Example mapping: { cart_summary: 'entry.123456' }
      // Replace 'entry.123456' with the real field ID from the form prefill URL.
      if(window.SimpleCart){
        // placeholder mapping; update with real entry IDs when available
        window.SimpleCart.setFormPrefillMap({ cart_summary: 'entry.123456' });
      }
      // render cart on load
      document.addEventListener('DOMContentLoaded', function(){
        const container = document.getElementById('cart-container');
        if(container && window.SimpleCart) window.SimpleCart.render(container);
        // re-render on storage events
        window.addEventListener('storage', () => { if(window.SimpleCart) window.SimpleCart.render(container); });
      });
    </script>
    <script>
      // Wire admin prefill UI
      (function(){
        const textarea = document.getElementById('prefill-url');
        const btn = document.getElementById('apply-prefill');
        const status = document.getElementById('prefill-status');
        if(!textarea || !btn || !status || !window.SimpleCart) return;
        btn.addEventListener('click', function(){
          const url = textarea.value && textarea.value.trim();
          if(!url) { status.textContent = 'Paste a prefill URL first.'; return; }
              try{
                window.SimpleCart.setFormPrefillFromUrl(url);
                if(window.SimpleCart._prefillMap){
                  status.textContent = 'Prefill mapping set: ' + Object.keys(window.SimpleCart._prefillMap).join(', ');
                }else{
                  status.textContent = 'No entry.* parameters found in URL.';
                }
              }catch(e){ status.textContent = 'Error parsing URL'; }
        });
            // populate if stored
            try{
              const stored = window.SimpleCart && window.SimpleCart.getStoredPrefill && window.SimpleCart.getStoredPrefill();
              if(stored){
                if(stored.url) textarea.value = stored.url;
                if(stored.map) status.textContent = 'Stored mapping: ' + Object.keys(stored.map).join(', ');
              }
            }catch(e){}

            // clear stored mapping
            const clearBtn = document.getElementById('clear-prefill');
            if(clearBtn){
              clearBtn.addEventListener('click', function(){
                try{ localStorage.removeItem('adara_prefill_v1'); window.SimpleCart._prefillMap = null; status.textContent = 'Prefill cleared.'; textarea.value=''; }catch(e){ status.textContent='Clear failed'; }
              });
            }
      })();
    </script>
  </body>
</html>
